<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>My first three.js app</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        display: block;
      }
    </style>
  </head>

  <body>
    <script type="module">
      import * as THREE from '/three.js-master/build/three.module.js';
      import {GLTFLoader} from '/three.js-master/examples/jsm/loaders/GLTFLoader.js';
      import {OrbitControls} from '/three.js-master/examples/jsm/controls/OrbitControls.js';

      let scene,
        camera,
        renderer,
        controls;

      function init() {
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0.8, 0.8, 0.8);
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.z = 100;

        let light = new THREE.SpotLight(0xffffff);
        light.position.set(0, 300, 0);
        scene.add(light);
        let spotLightHelper = new THREE.SpotLightHelper(light);
        scene.add(spotLightHelper);

        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        controls = new OrbitControls(camera, renderer.domElement);
        controls.maxDistance = 200.0;
        controls.minDistance = 20.0;
        //controls.autoRotate = true;
        controls.autoRotateSpeed = 1.0;

        let loader = new GLTFLoader();
        loader.load('mep-building-model/scene.gltf', function (gltf) {
          let mesh = gltf.scene

          mesh.traverse((child) => {
            if (child instanceof THREE.Mesh) {
              //console.log(child);
              child.material.opacity = 0.2
              if (child.name === "mesh_9") {
                child.material.color = {
                  r: 1,
                  g: 0,
                  b: 0
                };
              }
            }
          })

          mesh.position.x = -160;
          mesh.position.z = -100;
          mesh.position.y = -20;
          mesh.scale.x = 2;
          mesh.scale.y = 2;
          mesh.scale.z = 2;
          scene.add(mesh);
          animate();
        });
      }

      function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
      }

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      window.addEventListener('resize', onWindowResize, false);
      init();
    </script>
  </body>

</html>
